---
title: 'Restore Dashboard backup'
subtitle: 'Learn how to restore your dashboard backup to a new Supabase project'
breadcrumb: 'Migrations'
---

## Before you begin

<Accordion
  type="default"
  openBehaviour="multiple"
  chevronAlign="right"
  justified
  size="medium"
  className="text-foreground-light mt-8 mb-6"
>
  <div className="border-b mt-3 pb-3">
    <AccordionItem
      header="Install Postgresql which includes psql"
      id="item-1"
    >
      <PostgresInstallation />
    </AccordionItem>

  </div>
  <div className="border-b mt-3 pb-3">
    <AccordionItem
      header="Create and configure a new Supabase project"
      id="item-2"
    >
      <StepHikeCompact>
      <StepHikeCompact.Step step={1}>
        <StepHikeCompact.Details title="Create New project" fullWidth>
          Create a new [Supabase project](https://database.new)
        </StepHikeCompact.Details>
      </StepHikeCompact.Step>
        <StepHikeCompact.Step step={2}>
          <StepHikeCompact.Details title="Configure your new project" fullWidth>
                In your new project:

                - If you were using Webhooks, enable [Database Webhooks](https://supabase.com/dashboard/project/_/database/hooks).
                - If you were using any extensions, enable the [Extensions](https://supabase.com/dashboard/project/_/database/extensions).
                - If you were using Replication for Realtime, enable [Publication](https://supabase.com/dashboard/project/_/database/publications) on the tables where you had it enabled
          </StepHikeCompact.Details>
        </StepHikeCompact.Step>
      </StepHikeCompact>
    </AccordionItem>

  </div>
</Accordion>

## Restore backup

<StepHikeCompact>
  <StepHikeCompact.Step step={1}>
    <StepHikeCompact.Details title="Get your new database connection string" fullWidth>
      Go to your [Supabase project page](https://supabase.com/dashboard/project/_/) and click the connect button at the top of the page to get your project's connection string. It will look similar to this:

      ```bash
        postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@[HOST].supabase.com:5432/postgres
      ```

      <Admonition type="info">
        Use the Session pooler connection string if you are not sure which connection string to use.
      </Admonition>
    </StepHikeCompact.Details>

  </StepHikeCompact.Step>
<StepHikeCompact.Step step={2}>
  <StepHikeCompact.Details title="Get your database password" fullWidth>
    You can reset your database password if necessary in your [Database Settings](https://supabase.com/dashboard/project/_/settings/database)

    Replace ```[YOUR-PASSWORD]``` with your actual database password in the connection string from Step 1.

  </StepHikeCompact.Details>
</StepHikeCompact.Step>

<StepHikeCompact.Step step={3}>
  <StepHikeCompact.Details title="Get your file path to your downloaded backup" fullWidth>
    You will want to get your filepath relative to what directory you are running your terminal
    from. If you are running your terminal from the Desktop folder, your "/file/path" would be:
    ```./filename.backup```
  </StepHikeCompact.Details>
</StepHikeCompact.Step>

<StepHikeCompact.Step step={4}>
  <StepHikeCompact.Details title="Verify your backup file format" fullWidth>
    The backup file might be gzipped and have a .gz file extension. You will need to decompress it
    and the file you use should look like this: ```backup_name.backup ```
  </StepHikeCompact.Details>
</StepHikeCompact.Step>

<StepHikeCompact.Step step={5}>
    <StepHikeCompact.Details title="Restore your backup" fullWidth>
      Run this command after replacing ```[CONNECTION_STRING]``` from Step 1 & 2 and ```/file/path``` with the path from Step 3:

      <StepHikeCompact.Code>

        ```sql
        psql -d [CONNECTION_STRING] -f /file/path
        ```
      </StepHikeCompact.Code>
    </StepHikeCompact.Details>

  </StepHikeCompact.Step>
</StepHikeCompact>
## Common issues

"**psql: error: connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: received invalid response to GSSAPI negotiation:**"

The most likely reason for this is that you are using psql and postgres version 15 or lower. Completely remove the Postgresql installation and install the latest version as per the instructions above to resolve this issue.

"**psql: error: connection to server at "aws-0-us-east-1.pooler.supabase.com" (44.216.29.125), port 5432 failed: error received from server in SCRAM exchange: Wrong password**"

If you reset your password for your project, it may take a few minutes for it to reflect. Try again after a few minutes and it should be fine assuming you correctly set the password in the connection string.

"**ERROR: must be member of role ROLE**"
"**ERROR: grant options cannot be granted back to your own grantor**"
"**ERROR: constraint CONSTRAINT for relation RELATION already exists**"
"**ERROR: ...**"

These are normal and expected unless something is broken in the project. The reason for these errors is due to the Dashboard backup being a full database dump that is ideal to completely rebuild the database from scratch. This is intended to give you the option to restore your database anywhere a Postgres database can be restored even outside of Supabase.

However, as you created a new project to restore to, Supabase configures and sets up various aspects that the full database dump would also try to re-create. The errors are due to those parts already being created and setup.

## Migrate storage objects to new project's S3 storage

After restoring the project above, the buckets and files will show up in the dashboard. However, the actual storage objects stored in S3 would not be present so it would cause issues if you try to retrieve or do any file operations.

There is a Google colab script provided below to walk you through migrating your downloaded storage objects to your new project S3 buckets.

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/PLyn/supabase-storage-migrate/blob/main/Supabase_Storage_migration.ipynb)

<Admonition type="info">
  The Google Colab script would require uploading the storage objects to Google colab first and then
  upload it to your S3 buckets. This can add significant time to the process if your storage objects
  are large in size.

You may want to potentially adapt the script to run locally if you have very large storage objects.

</Admonition>
